{
	"version": "0.1.0",
	"namespace": "canonical-prompt-generator",
	"locale": "pt-BR",
	"createdAt": "2026-01-24",
	"stages": {
		"stage1_initialRole": {
			"id": "stage1_initialRole",
			"title": "O que você quer que eu faça?",
			"description": "Seleção simples de papel inicial. Não impõe restrições finais; apenas dá um prior semântico para o match de níveis.",
			"options": [
				{
					"id": "role.analyze",
					"label": "Analisar",
					"userHint": "Quero diagnóstico, lacunas, riscos, inconsistências. Sem executar mudanças.",
					"aiPrior": { "levelsBoost": ["N2", "N6", "N7"], "weight": 0.15 }
				},
				{
					"id": "role.synthesize",
					"label": "Organizar / Sintetizar",
					"userHint": "Quero estruturar, consolidar e dar forma. Sem criar coisas arbitrárias.",
					"aiPrior": { "levelsBoost": ["N3", "N8"], "weight": 0.15 }
				},
				{
					"id": "role.explore",
					"label": "Explorar alternativas",
					"userHint": "Quero opções, abordagens e trade-offs. Sem decidir por mim.",
					"aiPrior": { "levelsBoost": ["N4", "N5"], "weight": 0.15 }
				},
				{
					"id": "role.decideSupport",
					"label": "Apoiar decisão",
					"userHint": "Quero recomendação e priorização com justificativa. A decisão final é minha.",
					"aiPrior": { "levelsBoost": ["N5"], "weight": 0.15 }
				},
				{
					"id": "role.document",
					"label": "Documentar / Formalizar",
					"userHint": "Quero regras, contratos, especificações e documentação normativa.",
					"aiPrior": { "levelsBoost": ["N8", "N6"], "weight": 0.15 }
				},
				{
					"id": "role.transform",
					"label": "Transformar conteúdo",
					"userHint": "Quero aplicar regras explícitas: reformatar, normalizar, extrair, comparar versões.",
					"aiPrior": { "levelsBoost": ["N1", "N3"], "weight": 0.15 }
				}
			],
			"constraints": {
				"maxOptions": 8,
				"noDirectLevelSelection": true
			}
		},
		"stage2_cognitiveRulers": {
			"id": "stage2_cognitiveRulers",
			"title": "Réguas cognitivas",
			"description": "O usuário posiciona a intenção nas 5 dimensões expostas. Escala 1–5.",
			"rulers": [
				{
					"id": "ruler.inference",
					"label": "Inferência",
					"tooltip": "Quanto a IA pode deduzir além do que está explícito?",
					"scale": [
						{
							"value": 1,
							"uiLabel": "Somente explícito",
							"uiHint": "Sem deduzir intenção; apenas aplicar o que está escrito.",
							"aiMeaning": "Inferência mínima; evitar suposições e extrapolações."
						},
						{
							"value": 2,
							"uiLabel": "Baixa",
							"uiHint": "Deduções simples e locais, sem extrapolar.",
							"aiMeaning": "Inferência baixa e conservadora."
						},
						{
							"value": 3,
							"uiLabel": "Média",
							"uiHint": "Inferir estrutura e relações óbvias.",
							"aiMeaning": "Inferência moderada (estrutura/organização)."
						},
						{
							"value": 4,
							"uiLabel": "Alta (controlada)",
							"uiHint": "Explorar implicações e possibilidades, com cautela.",
							"aiMeaning": "Inferência alta, mas com rastreabilidade."
						},
						{
							"value": 5,
							"uiLabel": "Máxima",
							"uiHint": "A IA pode interpretar intenção e ampliar opções fortemente.",
							"aiMeaning": "Inferência máxima; alto risco se fonte/escopo não suportarem."
						}
					]
				},
				{
					"id": "ruler.decision",
					"label": "Decisão",
					"tooltip": "Quanto a IA pode concluir/recomendar?",
					"scale": [
						{
							"value": 1,
							"uiLabel": "Nenhuma",
							"uiHint": "Não recomendar; apenas executar/analisar/organizar.",
							"aiMeaning": "Sem recomendação; sem priorização."
						},
						{
							"value": 2,
							"uiLabel": "Recomendar (leve)",
							"uiHint": "Pode sugerir uma opção, com justificativa, sem impor.",
							"aiMeaning": "Recomendação permitida, sem decisão final."
						},
						{
							"value": 3,
							"uiLabel": "Governança / Bloqueio",
							"uiHint": "Pode parar, bloquear e exigir clarificação.",
							"aiMeaning": "Autoridade para interromper/validar escopo e regras."
						},
						{
							"value": 4,
							"uiLabel": "Alta (não usar)",
							"uiHint": "Reservado; não deve ser usado no sistema.",
							"aiMeaning": "Não permitido (violação constitucional)."
						},
						{
							"value": 5,
							"uiLabel": "Total (proibido)",
							"uiHint": "A IA decide por você. Proibido.",
							"aiMeaning": "Proibido por design."
						}
					],
					"constitutionalCap": 3
				},
				{
					"id": "ruler.scope",
					"label": "Escopo",
					"tooltip": "Qual o alcance do impacto do que a IA vai fazer?",
					"scale": [
						{
							"value": 1,
							"uiLabel": "Local (trecho específico)",
							"uiHint": "Um trecho, um parágrafo, uma função, uma parte bem delimitada.",
							"aiMeaning": "Atuar somente em partes explicitamente delimitadas."
						},
						{
							"value": 2,
							"uiLabel": "Artefato único",
							"uiHint": "Um documento inteiro, uma página, um arquivo.",
							"aiMeaning": "Atuar em um único artefato completo."
						},
						{
							"value": 3,
							"uiLabel": "Multi-artefato",
							"uiHint": "Consolidar/organizar vários artefatos relacionados.",
							"aiMeaning": "Agregação e coerência entre múltiplas fontes fornecidas."
						},
						{
							"value": 4,
							"uiLabel": "Projeto / Sistema",
							"uiHint": "Afeta estrutura geral, arquitetura ou fluxo completo.",
							"aiMeaning": "Impacto amplo; exige governança e rastreabilidade."
						},
						{
							"value": 5,
							"uiLabel": "Sistêmico (constitucional)",
							"uiHint": "Define regras, contratos e políticas do sistema.",
							"aiMeaning": "Nível constitucional; foco em normas e invariantes."
						}
					]
				},
				{
					"id": "ruler.source",
					"label": "Fonte de verdade",
					"tooltip": "De onde a IA pode tirar informação válida?",
					"scale": [
						{
							"value": 1,
							"uiLabel": "Fechada (somente o que eu fornecer)",
							"uiHint": "Nada de pesquisa; nada de conhecimento externo como verdade.",
							"aiMeaning": "Fonte fechada; se faltar dado, parar e pedir."
						},
						{
							"value": 2,
							"uiLabel": "Semiaberta (conhecimento geral)",
							"uiHint": "Pode usar conhecimento geral, sem citar pesquisas recentes.",
							"aiMeaning": "Usar conhecimento estável; evitar fatos voláteis."
						},
						{
							"value": 3,
							"uiLabel": "Aberta (pesquisa permitida)",
							"uiHint": "Pode pesquisar e citar fontes quando necessário.",
							"aiMeaning": "Pesquisa permitida; citar e reconciliar fontes."
						},
						{
							"value": 4,
							"uiLabel": "Aberta (multi-fonte comparativa)",
							"uiHint": "Comparar várias fontes e reportar divergências.",
							"aiMeaning": "Pesquisa + comparação + divergências explícitas."
						},
						{
							"value": 5,
							"uiLabel": "Total (não recomendado)",
							"uiHint": "Liberdade total de fonte. Evitar por risco de deriva.",
							"aiMeaning": "Evitar: risco de irreprodutibilidade e deriva."
						}
					]
				},
				{
					"id": "ruler.meta",
					"label": "Função Meta",
					"tooltip": "A IA atua só no conteúdo ou também no processo cognitivo?",
					"scale": [
						{
							"value": 1,
							"uiLabel": "Sem meta",
							"uiHint": "Foco no resultado, sem discutir o processo.",
							"aiMeaning": "Sem meta-cognição."
						},
						{
							"value": 2,
							"uiLabel": "Leve",
							"uiHint": "Pode sinalizar riscos e limites quando necessário.",
							"aiMeaning": "Meta leve (avisos e limites)."
						},
						{
							"value": 3,
							"uiLabel": "Moderada",
							"uiHint": "Pode explicitar pressupostos e contratos básicos.",
							"aiMeaning": "Meta moderada (contrato e rastreabilidade)."
						},
						{
							"value": 4,
							"uiLabel": "Alta",
							"uiHint": "Pode justificar escolhas e explicar por que certas regras existem.",
							"aiMeaning": "Meta alta (explicação do processo)."
						},
						{
							"value": 5,
							"uiLabel": "Máxima (arquitetura)",
							"uiHint": "A IA atua sobre o sistema: contratos, níveis, governança.",
							"aiMeaning": "Meta máxima (níveis 7–8 típicos)."
						}
					]
				}
			],
			"outputShape": {
				"rulersVector": {
					"inference": "1..5",
					"decision": "1..5",
					"scope": "1..5",
					"source": "1..5",
					"meta": "1..5"
				}
			}
		}
	},
	"matching": {
		"canonicalLevels": {
			"scale": "1..5",
			"levels": [
				{
					"id": "N1",
					"name": "Execução Estritamente Delimitada",
					"vector": {
						"inference": 1,
						"decision": 1,
						"scope": 1,
						"source": 1,
						"meta": 1
					}
				},
				{
					"id": "N2",
					"name": "Análise Controlada e Diagnóstico",
					"vector": {
						"inference": 2,
						"decision": 1,
						"scope": 2,
						"source": 1,
						"meta": 1
					}
				},
				{
					"id": "N3",
					"name": "Síntese Estruturada e Organização Cognitiva",
					"vector": {
						"inference": 3,
						"decision": 1,
						"scope": 3,
						"source": 1,
						"meta": 1
					}
				},
				{
					"id": "N4",
					"name": "Exploração de Alternativas e Trade-offs",
					"vector": {
						"inference": 4,
						"decision": 1,
						"scope": 4,
						"source": 2,
						"meta": 1
					}
				},
				{
					"id": "N5",
					"name": "Apoio à Decisão Humana",
					"vector": {
						"inference": 4,
						"decision": 2,
						"scope": 4,
						"source": 2,
						"meta": 2
					}
				},
				{
					"id": "N6",
					"name": "Governança, Controle e Segurança Cognitiva",
					"vector": {
						"inference": 2,
						"decision": 3,
						"scope": 5,
						"source": 1,
						"meta": 3
					}
				},
				{
					"id": "N7",
					"name": "Meta-Cognição e Arquitetura de Pensamento",
					"vector": {
						"inference": 3,
						"decision": 1,
						"scope": 4,
						"source": 2,
						"meta": 5
					}
				},
				{
					"id": "N8",
					"name": "Documentação, Contratos e Sistemas de Uso",
					"vector": {
						"inference": 2,
						"decision": 2,
						"scope": 5,
						"source": 1,
						"meta": 5
					}
				}
			]
		},
		"weights": {
			"inference": 1.0,
			"decision": 1.5,
			"scope": 1.2,
			"source": 1.5,
			"meta": 1.3
		},
		"priorFromInitialRole": {
			"enabled": true,
			"maxContribution": 0.15,
			"defaultWeight": 0.15
		},
		"hardBlocks": {
			"constitutional": {
				"decisionMaxAllowed": 3,
				"forbidTotalAutonomy": true,
				"forbidUnboundedResponsibilityShift": true
			},
			"rules": [
				{
					"id": "block.decision.totalOrHigh",
					"name": "Decisão total/alta é proibida",
					"when": "user.decision >= 4 OR level.vector.decision >= 4",
					"action": "BLOCK"
				},
				{
					"id": "block.source.closedButResearch",
					"name": "Fonte fechada não permite pesquisa/benchmarks",
					"when": "user.source == 1 AND user.initialRole IN ['role.research','role.explore']",
					"action": "BLOCK"
				},
				{
					"id": "block.inferenceHighWithClosedSource",
					"name": "Inferência alta com fonte fechada é instável",
					"when": "user.source == 1 AND user.inference >= 4",
					"action": "BLOCK"
				},
				{
					"id": "block.metaHighAgainstOperational",
					"name": "Meta alta conflita com objetivo operacional direto",
					"when": "user.meta >= 4 AND user.initialRole IN ['role.transform','role.execute']",
					"action": "BLOCK_OR_REQUIRE_CONFIRMATION"
				},
				{
					"id": "block.scopeSystemicWithoutSystemicIntent",
					"name": "Escopo sistêmico sem intenção sistêmica",
					"when": "user.scope <= 2 AND (level.vector.scope >= 4)",
					"action": "BLOCK"
				},
				{
					"id": "block.governanceRequiresDecision3",
					"name": "Governança exige decisão=3",
					"when": "level.id == 'N6' AND user.decision < 3",
					"action": "BLOCK"
				}
			],
			"policy": {
				"onBlock": "STOP_AND_ASK_MINIMUM",
				"askStyle": "multiple_choice_prefered"
			}
		},
		"thresholds": {
			"autoSelectMin": 90,
			"candidatesMin": 70,
			"blockBelow": 70,
			"maxCandidates": 3
		},
		"corrections": {
			"enabled": true,
			"purpose": "Fallback controlado sem loop de recálculo/segunda chamada.",
			"deltaPolicy": {
				"maxRulersChanged": 2,
				"maxStepPerRuler": 1,
				"allowNoneOption": true
			},
			"selectionPolicy": {
				"maxSuggestions": 3,
				"pickClosestDeltas": true,
				"preferCriticalAxesFirst": ["decision", "source"],
				"neverIntroduceNewBlocks": true
			},
			"applicationPolicy": {
				"userChoosesOne": true,
				"noSecondChoiceLoop": true,
				"applyOnceThenProceed": true,
				"recomputeInternallyForFinalLevel": true
			}
		},
		"outputContract": {
			"shape": {
				"selectedLevel": "N1..N8 | null",
				"score": "0..100 | null",
				"candidates": [
					{
						"levelId": "N1..N8",
						"score": "0..100",
						"reasons": ["string"]
					}
				],
				"correctionsSuggested": [
					{
						"id": "string",
						"label": "string",
						"delta": {
							"inference": -1,
							"decision": 0,
							"scope": 0,
							"source": 0,
							"meta": 0
						},
						"shortRationale": "string"
					}
				],
				"correctionChosen": {
					"id": "string | null",
					"delta": {
						"inference": 0,
						"decision": 0,
						"scope": 0,
						"source": 0,
						"meta": 0
					}
				},
				"blocked": {
					"isBlocked": "boolean",
					"reasons": ["string"]
				}
			}
		}
	}
}
